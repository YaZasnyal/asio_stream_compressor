<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>asio_stream_compressor::compressor class | asio_stream_compressor</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600" />
  <link rel="stylesheet" href="m-dark+documentation.compiled.css" />
  <link rel="icon" href="favicon-dark.png" type="image/png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#22272e" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <a href="index.html" id="m-navbar-brand" class="m-col-t-8 m-col-m-none m-left-m">asio_stream_compressor</a>
      <div class="m-col-t-4 m-hide-m m-text-right m-nopadr">
        <a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
          <path id="m-doc-search-icon-path" d="m6 0c-3.31 0-6 2.69-6 6 0 3.31 2.69 6 6 6 1.49 0 2.85-0.541 3.89-1.44-0.0164 0.338 0.147 0.759 0.5 1.15l3.22 3.79c0.552 0.614 1.45 0.665 2 0.115 0.55-0.55 0.499-1.45-0.115-2l-3.79-3.22c-0.392-0.353-0.812-0.515-1.15-0.5 0.895-1.05 1.44-2.41 1.44-3.89 0-3.31-2.69-6-6-6zm0 1.56a4.44 4.44 0 0 1 4.44 4.44 4.44 4.44 0 0 1-4.44 4.44 4.44 4.44 0 0 1-4.44-4.44 4.44 4.44 0 0 1 4.44-4.44z"/>
        </svg></a>
        <a id="m-navbar-show" href="#navigation" title="Show navigation"></a>
        <a id="m-navbar-hide" href="#" title="Hide navigation"></a>
      </div>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-6 m-col-m-none">
            <li>
              <a href="pages.html">Pages</a>
              <ol>
                <li><a href="about.html">About</a></li>
              </ol>
            </li>
            <li><a href="namespaces.html">Namespaces</a></li>
          </ol>
          <ol class="m-col-t-6 m-col-m-none" start="3">
            <li><a href="annotated.html">Classes</a></li>
            <li><a href="files.html">Files</a></li>
            <li class="m-show-m"><a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
              <use href="#m-doc-search-icon-path" />
            </svg></a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main><article>
  <div class="m-container m-container-inflatable">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <h1>
          <div class="m-doc-include m-code m-inverted m-right-m m-text-right"><span class="cp">#include</span> <a class="cpf" href="asio__stream__compressor_8h.html">&lt;asio_stream_compressor.h&gt;</a></div>
          <div class="m-doc-template">template&lt;class Stream, class Allocator = std::allocator&lt;char&gt;&gt;</div>
          <span class="m-breadcrumb"><a href="namespaceasio__stream__compressor.html">asio_stream_compressor</a>::<wbr/></span>compressor <span class="m-thin">class</span>
        </h1>
        <p>The Compressor class is used to transparently compress and decompress data before sending or receiving it from the underlying stream.</p>
        <div class="m-block m-default">
          <h3>Contents</h3>
          <ul>
            <li>
              Reference
              <ul>
                <li><a href="#pub-types">Public types</a></li>
                <li><a href="#typeless-methods">Constructors, destructors, conversion operators</a></li>
                <li><a href="#pub-methods">Public functions</a></li>
              </ul>
            </li>
          </ul>
        </div>
<p>Example:</p><pre class="m-code"><span class="k">namespace</span><span class="w"> </span><span class="nn">ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nn">boost</span><span class="o">::</span><span class="nn">asio</span><span class="o">::</span><span class="nn">ip</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="n">error_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">boost</span><span class="o">::</span><span class="n">system</span><span class="o">::</span><span class="n">error_code</span><span class="p">;</span>

<span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">io_context</span><span class="w"> </span><span class="n">ctx</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="kr">thread</span><span class="w"> </span><span class="nf">t</span><span class="p">([</span><span class="o">&amp;</span><span class="p">]()</span><span class="w"> </span><span class="p">{</span><span class="n">ctx</span><span class="p">.</span><span class="n">run_for</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">seconds</span><span class="p">(</span><span class="mi">5</span><span class="p">));});</span>

<span class="n">asio_compressor</span><span class="o">::</span><span class="n">compressor</span><span class="o">&lt;</span><span class="n">ip</span><span class="o">::</span><span class="n">tcp</span><span class="o">::</span><span class="n">socket</span><span class="o">&gt;</span><span class="w"> </span><span class="n">sock</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
<span class="n">sock</span><span class="p">.</span><span class="n">next_layer</span><span class="p">().</span><span class="n">async_connect</span><span class="p">(</span>
<span class="w">            </span><span class="n">ip</span><span class="o">::</span><span class="n">tcp</span><span class="o">::</span><span class="n">endpoint</span><span class="p">(</span><span class="n">ip</span><span class="o">::</span><span class="n">make_address</span><span class="p">(</span><span class="s">&quot;127.0.0.1&quot;</span><span class="p">),</span><span class="w"> </span><span class="mi">8080</span><span class="p">),</span>
<span class="w">            </span><span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">use_future</span><span class="p">).</span><span class="n">get</span><span class="p">();</span>
<span class="k">auto</span><span class="w"> </span><span class="n">bytes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sock</span><span class="p">.</span><span class="n">async_write_some</span><span class="p">(</span><span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">buffer</span><span class="p">(</span><span class="s">&quot;hello world!&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">13</span><span class="p">),</span>
<span class="w">                                   </span><span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">use_future</span><span class="p">).</span><span class="n">get</span><span class="p">();</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;sent successfully: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">bytes</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot; bytes&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="n">t</span><span class="p">.</span><span class="n">join</span><span class="p">();</span></pre><p>Implements traits: AsyncReadStream, AsyncWriteStream</p>
        <section id="pub-types">
          <h2><a href="#pub-types">Public types</a></h2>
          <dl class="m-doc">
            <dt id="a4cc7205d46b64b8d3a3b1cd2fc04f0a9">
              using <a href="#a4cc7205d46b64b8d3a3b1cd2fc04f0a9" class="m-doc-self">self</a> = <a href="classasio__stream__compressor_1_1compressor.html" class="m-doc">compressor</a>&lt;Stream, Allocator&gt;
            </dt>
            <dd><span></span></dd>
            <dt id="a268fdafa8ed3e4e44e7c2ab0ad6c0403">
              using <a href="#a268fdafa8ed3e4e44e7c2ab0ad6c0403" class="m-doc-self">next_layer_type</a> = typename std::remove_reference&lt;Stream&gt;::type
            </dt>
            <dd>The type of the next layer.</dd>
            <dt id="afc46c8290d9086656bce0b273e604257">
              using <a href="#afc46c8290d9086656bce0b273e604257" class="m-doc-self">lowest_layer_type</a> = typename next_layer_type::lowest_layer_type
            </dt>
            <dd>The type of the lowest layer.</dd>
            <dt id="a85e3b3737625d08677c66d5f32d1c4a3">
              using <a href="#a85e3b3737625d08677c66d5f32d1c4a3" class="m-doc-self">executor_type</a> = typename lowest_layer_type::executor_type
            </dt>
            <dd>The type of the executor associated with the object.</dd>
          </dl>
        </section>
        <section id="typeless-methods">
          <h2><a href="#typeless-methods">Constructors, destructors, conversion operators</a></h2>
          <dl class="m-doc">
            <dt>
              <div class="m-doc-template">template&lt;typename Executor&gt;</div>
              <span class="m-doc-wrap-bumper"><a href="#a9f82090899f531ce6ba53e291ff406c5" class="m-doc">compressor</a>(</span><span class="m-doc-wrap">Executor&amp; ex,
              const Allocator&amp; alloc = Allocator()) <span class="m-label m-flat m-success">noexcept(â€¦)</span></span>
            </dt>
            <dd>compressor - constructs new compressor with underlying layers</dd>
            <dt>
              <div class="m-doc-template">template&lt;typename Executor&gt;</div>
              <span class="m-doc-wrap-bumper"><a href="#a909ccc792f05d58a6bc4f1650404a99f" class="m-doc">compressor</a>(</span><span class="m-doc-wrap">Executor&amp; ex,
              int level,
              const Allocator&amp; alloc = Allocator()) <span class="m-label m-flat m-success">noexcept(â€¦)</span></span>
            </dt>
            <dd>compressor - constructs new compressor with underlying layers</dd>
            <dt>
              <span class="m-doc-wrap-bumper"><a href="#a066b8751006cff46f283d78374efbcee" class="m-doc">compressor</a>(</span><span class="m-doc-wrap">Stream&amp;&amp; next_layer,
              const Allocator&amp; alloc = Allocator()) <span class="m-label m-flat m-success">noexcept(â€¦)</span></span>
            </dt>
            <dd>compressor - constructs new compressor</dd>
            <dt>
              <span class="m-doc-wrap-bumper"><a href="#ab747639a0313ffc9ca09c92f5c0e0f88" class="m-doc">compressor</a>(</span><span class="m-doc-wrap">Stream&amp;&amp; next_layer,
              int level,
              const Allocator&amp; alloc = Allocator()) <span class="m-label m-flat m-success">noexcept(â€¦)</span></span>
            </dt>
            <dd>compressor - constructs new compressor</dd>
            <dt id="a64eb016a928ed8cec16072c2113ee86e">
              <span class="m-doc-wrap-bumper"><a href="#a64eb016a928ed8cec16072c2113ee86e" class="m-doc-self">compressor</a>(</span><span class="m-doc-wrap">const <a href="classasio__stream__compressor_1_1compressor.html#a4cc7205d46b64b8d3a3b1cd2fc04f0a9" class="m-doc">self</a>&amp;) <span class="m-label m-flat m-danger">deleted</span></span>
            </dt>
            <dd><span></span></dd>
            <dt id="a2b924fecf8715381ed46a0b43fac6635">
              <span class="m-doc-wrap-bumper"><a href="#a2b924fecf8715381ed46a0b43fac6635" class="m-doc-self">compressor</a>(</span><span class="m-doc-wrap"><a href="classasio__stream__compressor_1_1compressor.html#a4cc7205d46b64b8d3a3b1cd2fc04f0a9" class="m-doc">self</a>&amp;&amp;) <span class="m-label m-flat m-info">defaulted</span></span>
            </dt>
            <dd><span></span></dd>
          </dl>
        </section>
        <section id="pub-methods">
          <h2><a href="#pub-methods">Public functions</a></h2>
          <dl class="m-doc">
            <dt id="aff711b0d2beeab5d92520b2203c14a0c">
              <span class="m-doc-wrap-bumper">auto <a href="#aff711b0d2beeab5d92520b2203c14a0c" class="m-doc-self">operator=</a>(</span><span class="m-doc-wrap">const <a href="classasio__stream__compressor_1_1compressor.html#a4cc7205d46b64b8d3a3b1cd2fc04f0a9" class="m-doc">self</a>&amp;) -&gt; <a href="classasio__stream__compressor_1_1compressor.html#a4cc7205d46b64b8d3a3b1cd2fc04f0a9" class="m-doc">self</a>&amp; <span class="m-label m-flat m-danger">deleted</span></span>
            </dt>
            <dd><span></span></dd>
            <dt id="a98d4eeadc23d4a24d2e92d371b7d9e34">
              <span class="m-doc-wrap-bumper">auto <a href="#a98d4eeadc23d4a24d2e92d371b7d9e34" class="m-doc-self">operator=</a>(</span><span class="m-doc-wrap"><a href="classasio__stream__compressor_1_1compressor.html#a4cc7205d46b64b8d3a3b1cd2fc04f0a9" class="m-doc">self</a>&amp;&amp;) -&gt; <a href="classasio__stream__compressor_1_1compressor.html#a4cc7205d46b64b8d3a3b1cd2fc04f0a9" class="m-doc">self</a>&amp; <span class="m-label m-flat m-info">defaulted</span></span>
            </dt>
            <dd><span></span></dd>
            <dt>
              <div class="m-doc-template">template&lt;typename MutableBufferSequence, typename ReadToken = typename asio::default_completion_token&lt;<a href="classasio__stream__compressor_1_1compressor.html#a85e3b3737625d08677c66d5f32d1c4a3" class="m-doc">executor_<wbr />type</a>&gt;::type&gt;</div>
              <span class="m-doc-wrap-bumper">auto <a href="#a72f817146b04d2e07d997da234fbbceb" class="m-doc">async_read_some</a>(</span><span class="m-doc-wrap">const MutableBufferSequence&amp; buffers,
              ReadToken&amp;&amp; token = typename asio::default_completion_token&lt;<a href="classasio__stream__compressor_1_1compressor.html#a85e3b3737625d08677c66d5f32d1c4a3" class="m-doc">executor_<wbr />type</a>&gt;::type())</span>
            </dt>
            <dd>async_read_some starts asynchronous read operation</dd>
            <dt>
              <div class="m-doc-template">template&lt;typename ConstBufferSequence, typename WriteToken = typename asio::default_completion_token&lt;<a href="classasio__stream__compressor_1_1compressor.html#a85e3b3737625d08677c66d5f32d1c4a3" class="m-doc">executor_<wbr />type</a>&gt;::type&gt;</div>
              <span class="m-doc-wrap-bumper">auto <a href="#af567170aa26a4580f1b6246e1de8655b" class="m-doc">async_write_some</a>(</span><span class="m-doc-wrap">const ConstBufferSequence&amp; buffers,
              WriteToken&amp;&amp; token = typename asio::default_completion_token&lt;<a href="classasio__stream__compressor_1_1compressor.html#a85e3b3737625d08677c66d5f32d1c4a3" class="m-doc">executor_<wbr />type</a>&gt;::type())</span>
            </dt>
            <dd>async_write_some</dd>
            <dt id="a52b6a569ada482f24c771fdc14946efd">
              <span class="m-doc-wrap-bumper">auto <a href="#a52b6a569ada482f24c771fdc14946efd" class="m-doc-self">next_layer</a>(</span><span class="m-doc-wrap">) -&gt; <a href="classasio__stream__compressor_1_1compressor.html#a268fdafa8ed3e4e44e7c2ab0ad6c0403" class="m-doc">next_<wbr />layer_<wbr />type</a>&amp;</span>
            </dt>
            <dd>next_layer returns next layer in the stack of stream layers.</dd>
            <dt id="a390b48f52cb18fe3a5c506c297319a9c">
              <span class="m-doc-wrap-bumper">auto <a href="#a390b48f52cb18fe3a5c506c297319a9c" class="m-doc-self">next_layer</a>(</span><span class="m-doc-wrap">) const -&gt; const <a href="classasio__stream__compressor_1_1compressor.html#a268fdafa8ed3e4e44e7c2ab0ad6c0403" class="m-doc">next_<wbr />layer_<wbr />type</a>&amp;</span>
            </dt>
            <dd>next_layer returns next layer in the stack of stream layers.</dd>
            <dt id="a37f8d8bbaca7d6e8a1a80137b580e23f">
              <span class="m-doc-wrap-bumper">auto <a href="#a37f8d8bbaca7d6e8a1a80137b580e23f" class="m-doc-self">lowest_layer</a>(</span><span class="m-doc-wrap">) -&gt; <a href="classasio__stream__compressor_1_1compressor.html#afc46c8290d9086656bce0b273e604257" class="m-doc">lowest_<wbr />layer_<wbr />type</a>&amp;</span>
            </dt>
            <dd>lowest_layer returns the lowest layer in the stack of stream layers.</dd>
            <dt id="ab74c6862fc0b9877b4b84bfa2c6025e3">
              <span class="m-doc-wrap-bumper">auto <a href="#ab74c6862fc0b9877b4b84bfa2c6025e3" class="m-doc-self">lowest_layer</a>(</span><span class="m-doc-wrap">) const -&gt; const <a href="classasio__stream__compressor_1_1compressor.html#afc46c8290d9086656bce0b273e604257" class="m-doc">lowest_<wbr />layer_<wbr />type</a>&amp;</span>
            </dt>
            <dd>lowest_layer returns the lowest layer in the stack of stream layers.</dd>
            <dt id="ad1f4fb6e5f0ed537cc26f7789330e214">
              <span class="m-doc-wrap-bumper">auto <a href="#ad1f4fb6e5f0ed537cc26f7789330e214" class="m-doc-self">get_executor</a>(</span><span class="m-doc-wrap">) const -&gt; <a href="classasio__stream__compressor_1_1compressor.html#a85e3b3737625d08677c66d5f32d1c4a3" class="m-doc">executor_<wbr />type</a> <span class="m-label m-flat m-success">noexcept</span></span>
            </dt>
            <dd>get_executor obtains the executor object that the stream uses to run asynchronous operations</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a08c8da614301cf163880319e08e5dc28" class="m-doc">zstd_cctx_set_parameter</a>(</span><span class="m-doc-wrap">ZSTD_cParameter param,
              int value) -&gt; <a href="namespaceasio__stream__compressor.html#ac52e459bec528ebe1285db743529a688" class="m-doc">error_<wbr />code</a> <span class="m-label m-flat m-success">noexcept</span></span>
            </dt>
            <dd>zstd_cctx_set_parameter - sets encoder context parameter</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a4f7da209b636526fe002911d25233aa0" class="m-doc">zstd_dctx_set_parameter</a>(</span><span class="m-doc-wrap">ZSTD_dParameter param,
              int value) -&gt; <a href="namespaceasio__stream__compressor.html#ac52e459bec528ebe1285db743529a688" class="m-doc">error_<wbr />code</a> <span class="m-label m-flat m-success">noexcept</span></span>
            </dt>
            <dd>zstd_dctx_set_parameter</dd>
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#a86ee4bf2386534e3053bdcae92060bd1" class="m-doc">reset</a>(</span><span class="m-doc-wrap">)</span>
            </dt>
            <dd>reset - resets internal structures</dd>
            <dt id="a68f8133d0704738006b4e4cd1614d3a2">
              <span class="m-doc-wrap-bumper">auto <a href="#a68f8133d0704738006b4e4cd1614d3a2" class="m-doc-self">get_allocator</a>(</span><span class="m-doc-wrap">) const -&gt; const Allocator&amp; <span class="m-label m-flat m-success">noexcept</span></span>
            </dt>
            <dd>get_allocator - get compressor&#x27;s allocator</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a768d45998a8fe668a151c046d544a179" class="m-doc">get_statistics</a>(</span><span class="m-doc-wrap">) -&gt; <a href="classasio__stream__compressor_1_1compressor__statistics.html" class="m-doc">compressor_<wbr />statistics</a>&amp; <span class="m-label m-flat m-success">noexcept</span></span>
            </dt>
            <dd>get_statistics - returns compressor&#x27;s statistics</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a7121f265dcd08ac626271806e9871e79" class="m-doc">get_statistics</a>(</span><span class="m-doc-wrap">) const -&gt; const <a href="classasio__stream__compressor_1_1compressor__statistics.html" class="m-doc">compressor_<wbr />statistics</a>&amp; <span class="m-label m-flat m-success">noexcept</span></span>
            </dt>
            <dd>get_statistics - returns compressor&#x27;s statistics</dd>
          </dl>
        </section>
        <section>
          <h2>Function documentation</h2>
          <section class="m-doc-details" id="a9f82090899f531ce6ba53e291ff406c5"><div>
            <h3>
              <div class="m-doc-template">
                template&lt;class Stream, class Allocator&gt;
                template&lt;typename Executor&gt;
              </div>
              <span class="m-doc-wrap-bumper"> asio_stream_compressor::<wbr />compressor&lt;Stream, Allocator&gt;::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a9f82090899f531ce6ba53e291ff406c5" class="m-doc-self">compressor</a>(</span><span class="m-doc-wrap">Executor&amp; ex,
              const Allocator&amp; alloc = Allocator()) <span class="m-label m-success">noexcept(â€¦)</span></span></span>
            </h3>
            <p>compressor - constructs new compressor with underlying layers</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">ex</td>
                  <td>- executor object</td>
                </tr>
                <tr>
                  <td>alloc</td>
                  <td>- custom allocator object</td>
                </tr>
              </tbody>
              <thead>
                <tr><th colspan="2">Exceptions</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td>system_error</td>
                  <td>with zstd exception if level is incorrect</td>
                </tr>
              </tbody>
            </table>
          </div></section>
          <section class="m-doc-details" id="a909ccc792f05d58a6bc4f1650404a99f"><div>
            <h3>
              <div class="m-doc-template">
                template&lt;class Stream, class Allocator&gt;
                template&lt;typename Executor&gt;
              </div>
              <span class="m-doc-wrap-bumper"> asio_stream_compressor::<wbr />compressor&lt;Stream, Allocator&gt;::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a909ccc792f05d58a6bc4f1650404a99f" class="m-doc-self">compressor</a>(</span><span class="m-doc-wrap">Executor&amp; ex,
              int level,
              const Allocator&amp; alloc = Allocator()) <span class="m-label m-success">noexcept(â€¦)</span></span></span>
            </h3>
            <p>compressor - constructs new compressor with underlying layers</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">ex</td>
                  <td>- executor object</td>
                </tr>
                <tr>
                  <td>level</td>
                  <td>- compression level</td>
                </tr>
                <tr>
                  <td>alloc</td>
                  <td>- custom allocator object</td>
                </tr>
              </tbody>
              <thead>
                <tr><th colspan="2">Exceptions</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td>system_error</td>
                  <td>with zstd exception if level is incorrect</td>
                </tr>
              </tbody>
            </table>
          </div></section>
          <section class="m-doc-details" id="a066b8751006cff46f283d78374efbcee"><div>
            <h3>
              <div class="m-doc-template">
                template&lt;class Stream, class Allocator&gt;
              </div>
              <span class="m-doc-wrap-bumper"> asio_stream_compressor::<wbr />compressor&lt;Stream, Allocator&gt;::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a066b8751006cff46f283d78374efbcee" class="m-doc-self">compressor</a>(</span><span class="m-doc-wrap">Stream&amp;&amp; next_layer,
              const Allocator&amp; alloc = Allocator()) <span class="m-label m-success">noexcept(â€¦)</span></span></span>
            </h3>
            <p>compressor - constructs new compressor</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">next_layer</td>
                  <td></td>
                </tr>
                <tr>
                  <td>alloc</td>
                  <td>- custom allocator</td>
                </tr>
              </tbody>
              <thead>
                <tr><th colspan="2">Exceptions</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td>system_error</td>
                  <td>with zstd exception if level is incorrect</td>
                </tr>
              </tbody>
            </table>
          </div></section>
          <section class="m-doc-details" id="ab747639a0313ffc9ca09c92f5c0e0f88"><div>
            <h3>
              <div class="m-doc-template">
                template&lt;class Stream, class Allocator&gt;
              </div>
              <span class="m-doc-wrap-bumper"> asio_stream_compressor::<wbr />compressor&lt;Stream, Allocator&gt;::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#ab747639a0313ffc9ca09c92f5c0e0f88" class="m-doc-self">compressor</a>(</span><span class="m-doc-wrap">Stream&amp;&amp; next_layer,
              int level,
              const Allocator&amp; alloc = Allocator()) <span class="m-label m-success">noexcept(â€¦)</span></span></span>
            </h3>
            <p>compressor - constructs new compressor</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">next_layer</td>
                  <td></td>
                </tr>
                <tr>
                  <td>level</td>
                  <td>- compression level</td>
                </tr>
                <tr>
                  <td>alloc</td>
                  <td>- custom allocator</td>
                </tr>
              </tbody>
              <thead>
                <tr><th colspan="2">Exceptions</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td>system_error</td>
                  <td>with zstd exception if level is incorrect</td>
                </tr>
              </tbody>
            </table>
          </div></section>
          <section class="m-doc-details" id="a72f817146b04d2e07d997da234fbbceb"><div>
            <h3>
              <div class="m-doc-template">
                template&lt;class Stream, class Allocator&gt;
                template&lt;typename MutableBufferSequence, typename ReadToken = typename asio::default_completion_token&lt;<a href="classasio__stream__compressor_1_1compressor.html#a85e3b3737625d08677c66d5f32d1c4a3" class="m-doc">executor_<wbr />type</a>&gt;::type&gt;
              </div>
              <span class="m-doc-wrap-bumper">auto asio_stream_compressor::<wbr />compressor&lt;Stream, Allocator&gt;::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a72f817146b04d2e07d997da234fbbceb" class="m-doc-self">async_read_some</a>(</span><span class="m-doc-wrap">const MutableBufferSequence&amp; buffers,
              ReadToken&amp;&amp; token = typename asio::default_completion_token&lt;<a href="classasio__stream__compressor_1_1compressor.html#a85e3b3737625d08677c66d5f32d1c4a3" class="m-doc">executor_<wbr />type</a>&gt;::type())</span></span>
            </h3>
            <p>async_read_some starts asynchronous read operation</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Template parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">MutableBufferSequence</td>
                  <td></td>
                </tr>
                <tr>
                  <td>ReadToken</td>
                  <td><p>- completion handler with signature</p><pre class="m-code"><span class="w"> </span><span class="kt">void</span>
<span class="p">(</span><span class="n">error_code</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="p">)</span><span class="w"> </span></pre></td>
                </tr>
              </tbody>
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td>buffers</td>
                  <td>- The buffers into which the data will be read. Although the buffers object may be copied as necessary, ownership of the underlying buffers is retained by the caller, which must guarantee that they remain valid until the completion handler is called.</td>
                </tr>
                <tr>
                  <td>token</td>
                  <td>- The completion_token that will be used to produce a completion handler, which will be called when the read completes.</td>
                </tr>
              </tbody>
            </table>
<p>Regardless of whether the asynchronous operation completes immediately or not, the completion handler will not be invoked from within this function. On immediate completion, invocation of the handler will be performed in a manner equivalent to using boost::asio::post().</p><p>If this method returns an error it is usually impossible to continue operation so <a href="classasio__stream__compressor_1_1compressor.html#a86ee4bf2386534e3053bdcae92060bd1" class="m-doc">reset()</a> should be called to clear internal state of the compressor.</p>
          </div></section>
          <section class="m-doc-details" id="af567170aa26a4580f1b6246e1de8655b"><div>
            <h3>
              <div class="m-doc-template">
                template&lt;class Stream, class Allocator&gt;
                template&lt;typename ConstBufferSequence, typename WriteToken = typename asio::default_completion_token&lt;<a href="classasio__stream__compressor_1_1compressor.html#a85e3b3737625d08677c66d5f32d1c4a3" class="m-doc">executor_<wbr />type</a>&gt;::type&gt;
              </div>
              <span class="m-doc-wrap-bumper">auto asio_stream_compressor::<wbr />compressor&lt;Stream, Allocator&gt;::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#af567170aa26a4580f1b6246e1de8655b" class="m-doc-self">async_write_some</a>(</span><span class="m-doc-wrap">const ConstBufferSequence&amp; buffers,
              WriteToken&amp;&amp; token = typename asio::default_completion_token&lt;<a href="classasio__stream__compressor_1_1compressor.html#a85e3b3737625d08677c66d5f32d1c4a3" class="m-doc">executor_<wbr />type</a>&gt;::type())</span></span>
            </h3>
            <p>async_write_some</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">buffers</td>
                  <td>- The buffers from which the data will be read. Although the buffers object may be copied as necessary, ownership of the underlying buffers is retained by the caller, which must guarantee that they remain valid until the completion handler is called.</td>
                </tr>
                <tr>
                  <td>token</td>
                  <td>The completion_token that will be used to produce a completion handler, which will be called when the read completes.</td>
                </tr>
              </tbody>
            </table>
<p>Regardless of whether the asynchronous operation completes immediately or not, the completion handler will not be invoked from within this function. On immediate completion, invocation of the handler will be performed in a manner equivalent to using boost::asio::post().</p><p>If this method returns an error it is usually impossible to continue operation so <a href="classasio__stream__compressor_1_1compressor.html#a86ee4bf2386534e3053bdcae92060bd1" class="m-doc">reset()</a> should be called to clear internal state of the compressor.</p><aside class="m-note m-danger"><h4>Warning</h4><p>number of bytes in the callback will be equal to size of the provided buffers or 0 if not all of them could be transferred. This is because of difficulties of mapping provided byted to compressed bytes.</p></aside><p>This method flushes data to the next layer to ensure that the decoder on the other side is able to decode it. For small writes this may not be optimal because additional bytes have to be written by the encoder. This is why usage of boost::asio::buffered_stream is recommended in such case.</p><pre class="m-code"><span class="n">boost</span><span class="o">::</span><span class="n">asio</span><span class="o">::</span><span class="n">buffered_stream</span><span class="o">&lt;</span>
<span class="w">  </span><span class="n">asio_stream_compressor</span><span class="o">::</span><span class="n">compressor</span><span class="o">&lt;</span><span class="n">ip</span><span class="o">::</span><span class="n">tcp</span><span class="o">::</span><span class="n">socket</span><span class="o">&gt;&gt;</span>
<span class="w">  </span><span class="n">sock</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span><span class="w"> </span><span class="mi">8192</span><span class="p">,</span><span class="w"> </span><span class="mi">8192</span><span class="p">);</span></pre>
          </div></section>
          <section class="m-doc-details" id="a08c8da614301cf163880319e08e5dc28"><div>
            <h3>
              <div class="m-doc-template">
                template&lt;class Stream, class Allocator&gt;
              </div>
              <span class="m-doc-wrap-bumper"><a href="namespaceasio__stream__compressor.html#ac52e459bec528ebe1285db743529a688" class="m-doc">error_<wbr />code</a> asio_stream_compressor::<wbr />compressor&lt;Stream, Allocator&gt;::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a08c8da614301cf163880319e08e5dc28" class="m-doc-self">zstd_cctx_set_parameter</a>(</span><span class="m-doc-wrap">ZSTD_cParameter param,
              int value) <span class="m-label m-success">noexcept</span></span></span>
            </h3>
            <p>zstd_cctx_set_parameter - sets encoder context parameter</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">param</td>
                  <td>- param listed in ZSTD_cParameter</td>
                </tr>
                <tr>
                  <td>value</td>
                  <td>- value that is in range of ZSTD_cParam_getBounds()</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <th>Returns</th>
                  <td>error_code with zstd_error_category</td>
                </tr>
              </tfoot>
            </table>
<aside class="m-note m-danger"><h4>Warning</h4><p>calling this method after async_read/write_some may cause undefined behavior. Use <a href="classasio__stream__compressor_1_1compressor.html#a86ee4bf2386534e3053bdcae92060bd1" class="m-doc">reset()</a> to reset internal context and configure context again.</p></aside><p>Example:  if (auto ec = zstd_cctx_set_parameter(ZSTD_c_compressionLevel, 1000); ec) { // process error }</p>
          </div></section>
          <section class="m-doc-details" id="a4f7da209b636526fe002911d25233aa0"><div>
            <h3>
              <div class="m-doc-template">
                template&lt;class Stream, class Allocator&gt;
              </div>
              <span class="m-doc-wrap-bumper"><a href="namespaceasio__stream__compressor.html#ac52e459bec528ebe1285db743529a688" class="m-doc">error_<wbr />code</a> asio_stream_compressor::<wbr />compressor&lt;Stream, Allocator&gt;::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a4f7da209b636526fe002911d25233aa0" class="m-doc-self">zstd_dctx_set_parameter</a>(</span><span class="m-doc-wrap">ZSTD_dParameter param,
              int value) <span class="m-label m-success">noexcept</span></span></span>
            </h3>
            <p>zstd_dctx_set_parameter</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">param</td>
                  <td>- param listed in ZSTD_cParameter</td>
                </tr>
                <tr>
                  <td>value</td>
                  <td>- value that is in range of ZSTD_cParam_getBounds()</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <th>Returns</th>
                  <td>error_code with zstd_error_category</td>
                </tr>
              </tfoot>
            </table>
          </div></section>
          <section class="m-doc-details" id="a86ee4bf2386534e3053bdcae92060bd1"><div>
            <h3>
              <div class="m-doc-template">
                template&lt;class Stream, class Allocator&gt;
              </div>
              <span class="m-doc-wrap-bumper">void asio_stream_compressor::<wbr />compressor&lt;Stream, Allocator&gt;::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a86ee4bf2386534e3053bdcae92060bd1" class="m-doc-self">reset</a>(</span><span class="m-doc-wrap">)</span></span>
            </h3>
            <p>reset - resets internal structures</p>
<p>This method is used to reset compressor after failures. This will reset both encoder and decoder contexts and drop any remaining data as if ZSTD_ResetDirective::ZSTD_reset_session_and_parameters was used. This will also reset compression level to the one provided in the constructor or default if it wasn&#x27;t.</p><aside class="m-note m-danger"><h4>Warning</h4><p>It is unsafe to call this function if there is an active asynchronous operation in progress.</p></aside>
          </div></section>
          <section class="m-doc-details" id="a768d45998a8fe668a151c046d544a179"><div>
            <h3>
              <div class="m-doc-template">
                template&lt;class Stream, class Allocator&gt;
              </div>
              <span class="m-doc-wrap-bumper"><a href="classasio__stream__compressor_1_1compressor__statistics.html" class="m-doc">compressor_<wbr />statistics</a>&amp; asio_stream_compressor::<wbr />compressor&lt;Stream, Allocator&gt;::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a768d45998a8fe668a151c046d544a179" class="m-doc-self">get_statistics</a>(</span><span class="m-doc-wrap">) <span class="m-label m-success">noexcept</span></span></span>
            </h3>
            <p>get_statistics - returns compressor&#x27;s statistics</p>
            <table class="m-table m-fullwidth m-flat">
              <tfoot>
                <tr>
                  <th style="width: 1%">Returns</th>
                  <td><a href="classasio__stream__compressor_1_1compressor__statistics.html" class="m-doc">compressor_<wbr />statistics</a> object with read/write stats</td>
                </tr>
              </tfoot>
            </table>
<p>This method is thread safe</p>
          </div></section>
          <section class="m-doc-details" id="a7121f265dcd08ac626271806e9871e79"><div>
            <h3>
              <div class="m-doc-template">
                template&lt;class Stream, class Allocator&gt;
              </div>
              <span class="m-doc-wrap-bumper">const <a href="classasio__stream__compressor_1_1compressor__statistics.html" class="m-doc">compressor_<wbr />statistics</a>&amp; asio_stream_compressor::<wbr />compressor&lt;Stream, Allocator&gt;::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a7121f265dcd08ac626271806e9871e79" class="m-doc-self">get_statistics</a>(</span><span class="m-doc-wrap">) const <span class="m-label m-success">noexcept</span></span></span>
            </h3>
            <p>get_statistics - returns compressor&#x27;s statistics</p>
            <table class="m-table m-fullwidth m-flat">
              <tfoot>
                <tr>
                  <th style="width: 1%">Returns</th>
                  <td><a href="classasio__stream__compressor_1_1compressor__statistics.html" class="m-doc">compressor_<wbr />statistics</a> object with read/write stats</td>
                </tr>
              </tfoot>
            </table>
<p>This method is thread safe</p>
          </div></section>
        </section>
      </div>
    </div>
  </div>
</article></main>
<div class="m-doc-search" id="search">
  <a href="#!" onclick="return hideSearch()"></a>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-m-8 m-push-m-2">
        <div class="m-doc-search-header m-text m-small">
          <div><span class="m-label m-default">Tab</span> / <span class="m-label m-default">T</span> to search, <span class="m-label m-default">Esc</span> to close</div>
          <div id="search-symbolcount">&hellip;</div>
        </div>
        <div class="m-doc-search-content">
          <form>
            <input type="search" name="q" id="search-input" placeholder="Loading &hellip;" disabled="disabled" autofocus="autofocus" autocomplete="off" spellcheck="false" />
          </form>
          <noscript class="m-text m-danger m-text-center">Unlike everything else in the docs, the search functionality <em>requires</em> JavaScript.</noscript>
          <div id="search-help" class="m-text m-dim m-text-center">
            <p class="m-noindent">Search for symbols, directories, files, pages or
            modules. You can omit any prefix from the symbol or file path; adding a
            <code>:</code> or <code>/</code> suffix lists all members of given symbol or
            directory.</p>
            <p class="m-noindent">Use <span class="m-label m-dim">&darr;</span>
            / <span class="m-label m-dim">&uarr;</span> to navigate through the list,
            <span class="m-label m-dim">Enter</span> to go.
            <span class="m-label m-dim">Tab</span> autocompletes common prefix, you can
            copy a link to the result using <span class="m-label m-dim">âŒ˜</span>
            <span class="m-label m-dim">L</span> while <span class="m-label m-dim">âŒ˜</span>
            <span class="m-label m-dim">M</span> produces a Markdown link.</p>
          </div>
          <div id="search-notfound" class="m-text m-warning m-text-center">Sorry, nothing was found.</div>
          <ul id="search-results"></ul>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="search-v1.js"></script>
<script src="searchdata-v1.js" async="async"></script>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>asio_stream_compressor. Created with <a href="https://doxygen.org/">Doxygen</a> 1.9.1 and <a href="https://mcss.mosra.cz/">m.css</a>.</p>
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>
